<!DOCTYPE html>
<!--
    Copyright 2021 James Deery
    Released under the MIT licence, https://opensource.org/licenses/MIT
 -->
<html>
<head>
    <title>M8 Display</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="icon.png">
    <link rel="manifest" href="app.webmanifest">
    <link rel="stylesheet" href="build/index.css">
</head>
<body>
    <div id="display">
        <canvas id="canvas" width="320" height="240"></canvas>

        <div id="serial-fail" class="error hidden">
            <p>Failed to connect over Serial.
            Are you sure your Teensy is connected and the M8 Headless firmware is loaded?</p>
            <p>Make sure that there are no other programs running which may have the serial port open.</p>
            <p>It is also possible there's a bug in this code.
            There may be some messages in the developer console that will help with debugging.</a>
        </div>
        <div id="usb-fail" class="error hidden">
            <p>Failed to connect with WebUSB.
            Are you sure your Teensy is connected and the M8 Headless firmware is loaded?</p>
            <p>Connecting with WebUSB is known not to work on Windows or Linux.
            If you are using Chrome you can use Serial instead but you need to enable an experimental flag by going to <code>chrome://flags</code> and enabling "Experimental Web Platform features".</p>
        </div>
        <div id="no-serial-usb" class="error hidden">
            <p>Your browser doesn't appear to have Serial or WebUSB support.
            These are only currently supported in Chrome and some Chrome-derived browsers.</p>
        </div>

        <div id="buttons" class="hidden"></div>

        <svg id="controls" viewBox="0 0 640 480">
            <rect data-action="edit" x="490" y="10" />
            <rect data-action="option" x="340" y="10" />
            <rect data-action="up" x="160" y="30" />
            <rect data-action="left" x="10" y="180" />
            <rect data-action="down" x="160" y="180" />
            <rect data-action="right" x="310" y="180" />
            <rect data-action="select" x="175" y="340" />
            <rect data-action="start" x="325" y="340" />
        </svg>
    </div>

    <div id="settings" class="hidden">
        <button id="menu-button">Menu</button>
    </div>

    <div id="info">
        Work in progress, use at your own risk.
        More details at <a href="https://github.com/derkyjadex/M8WebDisplay">https://github.com/derkyjadex/M8WebDisplay</a>.
    </div>

    <div id="reload" class="hidden">
        <button>An update is available. Click to reload.</button>
    </div>

    <script type="module" src="main.js"></script>
</body>
</html>
