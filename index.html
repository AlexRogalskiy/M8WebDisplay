<!DOCTYPE html>
<!--
    Copyright 2021 James Deery
    Released under the MIT licence, https://opensource.org/licenses/MIT
 -->
<html>
<head>
    <title>M8 Display</title>
    <meta name="viewport" content="width: device-width, initial-scale=1">
    <style>
        @font-face {
            font-family: 'stealth57';
            src: url('stealth57.ttf');
        }
        body {
            font-family: sans-serif;
            background-color: #111;
            color: #eee;
        }
        a {
            color: #ddf;
        }
        a:visited {
            color: #fdf;
        }
        button {
            font-family: stealth57;
            height: 50px;
        }
        canvas {
            image-rendering: pixelated;
        }
        canvas, #svg {
            position: absolute;
            width: 640px;
            height: 480px;
            top: 0px;
            left: 10px;
        }
        #svg text {
            font-family: 'stealth57';
            font-size: 16px;
        }

        #display {
            position: relative;
            height: 480px;
            width: 640px;
            margin: 0 auto;
            user-select: none;
        }

        .hidden {
            display: none;
        }

        #controls button {
            user-select: none;
            padding: 50px;
        }

        #controls {
            position: relative;
            width: 640px;
            margin: 0 auto;
        }

        #controls rect {
            fill: #333;
            rx: 10px;
            stroke: #aaa;
            stroke-width: 3px;
        }
    </style>
</head>
<body>
    <div>
        Work in progress, use at your own risk.
        More details at <a href="https://github.com/derkyjadex/M8WebDisplay">https://github.com/derkyjadex/M8WebDisplay</a>.
    </div>
    <div id="buttons"></div>

    <div id="serial-fail" class="hidden">
        <p>Failed to connect over Serial.
        Are you sure your Teensy is connected and the M8 Headless firmware is loaded?</p>
        <p>It's possible there's a bug in this code.
        There may be some messages in the developer console that will help with debugging.</a>
    </div>
    <div id="usb-fail" class="hidden">
        <p>Failed to connect with WebUSB.
        Are you sure your Teensy is connected and the M8 Headless firmware is loaded?</p>
        <p>Connecting with WebUSB is known not to work on Windows or Linux.
        If you are using Chrome you can use Serial instead but you need to enable an experimental flag by going to <code>chrome://flags</code> and enabling "Experimental Web Platform features".</p>
    </div>
    <div id="no-serial-usb" class="hidden">
        <p>Your browser doesn't appear to have Serial or WebUSB support.
        These are only currently supported in Chrome and some Chrome-derived browsers.</p>
    </div>

    <div id="display">
        <canvas id="canvas" width="320" height="240"></canvas>
        <svg id="svg" width="320" height="240"></svg>
    </div>

    <div id="controls">
        <svg width="640" height="560">
            <rect data-key="edit" x="490" y="10" width="140" height="140" />
            <rect data-key="option" x="330" y="10" width="140" height="140" />
            <rect data-key="up" x="170" y="80" width="140" height="140" />
            <rect data-key="left" x="10" y="240" width="140" height="140" />
            <rect data-key="down" x="170" y="240" width="140" height="140" />
            <rect data-key="right" x="330" y="240" width="140" height="140" />
            <rect data-key="select" x="170" y="410" width="140" height="140" />
            <rect data-key="start" x="330" y="410" width="140" height="140" />
        </svg>
    </div>

    <script src="index.js"></script>
</body>
</html>
